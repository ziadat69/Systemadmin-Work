โ ุชุซุจูุช Squid ู ุฃุฏูุงุช ุงููุตุงุฏูุฉ
๐น ุนูู Ubuntu / Debian:

sudo apt update
sudo apt install squid apache2-utils -y

๐น ุนูู CentOS / RHEL:

sudo dnf install squid httpd-tools -y

โก ุฅูุดุงุก ูุณุชุฎุฏู ููุจุฑููุณู

sudo touch /etc/squid/passwd
sudo htpasswd /etc/squid/passwd user1

๐ ุงุณุชุจุฏู user1 ุจุงุณู ุงููุณุชุฎุฏู ุงูุฐู ุชุฑูุฏู. ูุฃุฏุฎู ูููุฉ ูุฑูุฑ ุนูุฏ ุงูุทูุจ.
โข ูุณุฎ ูุถุจุท ููู ุฅุนุฏุงุฏ Squid
ุฃููุงู: ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูููู ุงูุฃุตูู:

sudo cp /etc/squid/squid.conf /etc/squid/squid.conf.bak

ุซุงูููุง: ุงูุชุญ ุงูููู ููุชุนุฏูู:

sudo nano /etc/squid/squid.conf

ุซุงูุซูุง: ุงูุตู ุงูุฅุนุฏุงุฏ ุงูุงุญุชุฑุงูู ุงูุชุงูู:

# ================================
# Squid Proxy Config (ูุณุชูู ุงุญุชุฑุงูู)
# ูุณุชุดูู ุฃู ูุคุณุณุฉ ุชุนููููุฉ
# ================================

http_port 3128

# ===============================
# ูุตุงุฏูุฉ ุงููุณุชุฎุฏููู (Basic Auth)
# ===============================
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm RKH Secure Proxy
acl authenticated proxy_auth REQUIRED
http_access allow authenticated

# =========================
# ุชุญุฏูุฏ ุงูุดุจูุฉ ุงูุฏุงุฎููุฉ
# =========================
acl localnet src 192.168.0.0/16
acl SSL_ports port 443
acl Safe_ports port 80 443 21
acl CONNECT method CONNECT

# =========================
# ููุชุฑุฉ ุงููููุงุช ุงููุญุธูุฑุฉ
# =========================
acl bad_files url_regex -i \.exe$ \.mp4$ \.torrent$ \.zip$ \.rar$
http_access deny bad_files

# =========================
# ููุชุฑุฉ ุงูููุงูุน ุงููุญุธูุฑุฉ
# =========================
acl blocked_sites dstdomain .facebook.com .tiktok.com .pornhub.com
http_access deny blocked_sites

# =========================
# ุงูุชุญูู ูู ุงูุณุฑุนุฉ (Bandwidth)
# =========================
delay_pools 1
delay_class 1 2
delay_access 1 allow localnet
delay_parameters 1 125000/125000 32000/32000

# =========================
# ุชุณุฌูู ุงูุฏุฎูู (Logs)
# =========================
access_log /var/log/squid/access.log squid

# =========================
# ุงูุณูุงุญ ุจุงููุตูู ูุดุจูุชูุง
# =========================
http_access allow localnet
http_access deny all



โฃ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุฉ

sudo systemctl restart squid
sudo systemctl enable squid

โค ูุชุญ ูููุฐ 3128 ูู ุงูุฌุฏุงุฑ ุงููุงุฑู (ุฅู ูุฌุฏ)

sudo ufw allow 3128/tcp

โฅ ุงูุญุตูู ุนูู ุนููุงู ุงูู IP ููุณูุฑูุฑ

hostname -I

ูุซูุงู: 192.168.1.100 โ ูุฐุง ูู ุนููุงู ุงูุจุฑููุณู ุงูุฐู ุณุชุฑุจุท ุจู ุงูุฃุฌูุฒุฉ.
โฆ ุถุจุท ุงูุจุฑููุณู ุนูู ุฌูุงุฒ ุงููุณุชุฎุฏู
ูุซุงู ูู ุฅุนุฏุงุฏุงุช ุงููุชุตูุญ ุฃู ุงููุธุงู:

    Proxy IP: 192.168.1.100

    Port: 3128

    Username: user1

    Password: ุงูุชู ุฃุฏุฎูุชูุง ุนูุฏ ุฅูุดุงุก ุงููุณุชุฎุฏู

โง ุงุฎุชุจุงุฑ ุงูููุชุฑุฉ

    ุฌุฑูุจ ูุชุญ facebook.com โ ูุฌุจ ุฃู ููุญุฌุจ โ

    ุฌุฑูุจ ุชุญููู ููู .exe โ ูุฌุจ ุฃู ููููุน โ

    ุฌุฑูุจ ูููุน ุขุฎุฑ โ ููุณูุญ ุจุงููุตูู โ

โจ ุนุฑุถ ุณุฌู ุงููุดุงุทุงุช

sudo tail -f /var/log/squid/access.log



ูุชุงู 





1. ุชุซุจูุช Squid ุนูู ุงูุณูุฑูุฑ

ูู ุงูุณูุฑูุฑ ูุณุชุฎุฏู Ubuntu ุฃู Debian:

sudo apt update
sudo apt install squid apache2-utils -y

2. ุฅูุดุงุก ููู ุงููุณุชุฎุฏููู (ูุตุงุฏูุฉ)

ุจุฑูุชูููู ุงููุตุงุฏูุฉ ุณูููุน ุงููุตูู ุฅูุง ูููุตุฑุญ ููู:

sudo htpasswd -c /etc/squid/passwd admin

    ุงุณุชุจุฏู admin ุจุงุณู ุงููุณุชุฎุฏู ุงูุฐู ุชุฑูุฏ.

    ุณูุทูุจ ูููุฉ ูุฑูุฑ.

3. ุฅุนุฏุงุฏ ููู ุชูููู Squid

ุงูุชุญ ุงูููู:

sudo nano /etc/squid/squid.conf

ุงูุณุญ ุงููุญุชูู ุงูููุฌูุฏ (ุฃู ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃูููุง) ุซู ุงูุตู ุงูุชุงูู ูุน ุชุนุฏูู IP ุงูุดุจูุฉ ุญุณุจ ุดุจูุชู:

http_port 3128

auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm Restricted Proxy
acl authenticated proxy_auth REQUIRED
http_access allow authenticated

# ุชุญุฏูุฏ ุงูุดุจูุฉ ุงููุญููุฉ (ุนุฏู ูุฐุง ุญุณุจ ุดุจูุชู)
acl localnet src 192.168.1.0/24

# ุญุธุฑ ููุงูุน ูุนููุฉ
acl blocked_sites dstdomain .facebook.com .youtube.com .twitter.com
http_access deny blocked_sites

# ุงูุณูุงุญ ููุดุจูุฉ ุงููุญููุฉ ููุท
http_access allow localnet
http_access deny all

access_log /var/log/squid/access.log squid

4. ุฅุนุงุฏุฉ ุชุดุบูู ุฎุฏูุฉ Squid ูุชุทุจูู ุงูุชุบููุฑุงุช

sudo systemctl restart squid

5. ูุนุฑูุฉ ุนููุงู IP ุงูุณูุฑูุฑ

ูุชุณุชุฎุฏูู ูู ุถุจุท ุงูุฃุฌูุฒุฉ:

hostname -I

ูุซูุงู ุณูุธูุฑ: 192.168.1.100
6. ุถุจุท ุฃุฌูุฒุฉ ุงูููุธููู (ุงูุนููุงุก)

    ุนูู ูู ุฌูุงุฒ ููุธูุ ูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ุฃู ุงููุชุตูุญ:

        Proxy IP: 192.168.1.100 (ุนููุงู ุณูุฑูุฑ ุงูุจุฑููุณู)

        Port: 3128

        ุนูุฏ ุงูุชุตูุญุ ุณุชูุทูุจ ุจูุงูุงุช ุงูุฏุฎูู (ุงูุชู ุฃูุดุฃุชูุง ูู ุงูุฎุทูุฉ 2)

7. ุงุฎุชุจุงุฑ ุงูุญุธุฑ

    ูู ุฌูุงุฒ ููุธูุ ุญุงูู ูุชุญ facebook.com ุฃู ุฃู ูููุน ูุญุธูุฑ โ ูุฌุจ ุฃู ูุชู ุงูููุน.

    ููุงูุน ุฃุฎุฑู ูุณููุญ ุจูุง.

ููุงุญุธุงุช ูููุฉ:

    ุฅุฐุง ุงูุดุจูุฉ ุชุณุชุฎุฏู DHCPุ ุชุฃูุฏ ูู ุฃู ุนููุงู ุงูุณูุฑูุฑ ุซุงุจุช (Static IP).

    ูููู ุชุนุฏูู ูุงุฆูุฉ ุงูููุงูุน ุงููุญุธูุฑุฉ ุจุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ูู acl blocked_sites.

    ูููู ุชูุณูุน ุงูุญุธุฑ ููุดูู ุฃููุงุน ูููุงุช ุฃุฎุฑู ููุง ุชุฑูุฏ.

ูู ุชุฑูุฏูู ุฃุณุงุนุฏู ุจูุชุงุจุฉ ุณูุฑูุจุช Shell ุฌุงูุฒ ูุชูููุฐ ูุฐู ุงูุฎุทูุงุช ุฏูุนุฉ ูุงุญุฏุฉุ ุฃู ูู ุชุญุชุงุฌ ุดุฑุญ ููู ุชุถุจุท ุงูุจุฑููุณู ุชููุงุฆููุง ุนูู ุฃุฌูุฒุฉ ุงูููุธูููุ


ChatGPT kann Fehler machen. รberprรผfe wichtige Informationen. Siehe Cookie-Voreinstellungen.

